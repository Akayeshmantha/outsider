<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to build an <code>outsider</code> module • outsider</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to build an &lt;code&gt;outsider&lt;/code&gt; module">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">outsider</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/available.html">Available modules</a>
    </li>
    <li>
      <a href="../articles/build_a_module.html">How to build an `outsider` module</a>
    </li>
    <li>
      <a href="../articles/phylogenetic_pipeline.html">Phylogenetic pipeline</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>How to build an <code>outsider</code> module</h1>
            
      
      
      <div class="hidden name"><code>build_a_module.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>outsider</code> allows users to install and run programs on their own computer without the need to leave the R environment. If there is a command-line program that is not available through <code>outsider</code> you can create your own module to make it available. In this article, we will outline what makes an <code>outsider</code> module and then provide a simple walkthrough of a module.</p>
<p>If you can install the program on your own machine and have some experience with R packages and GitHub then you should be readily able to create one.</p>
<p>In this article, we will walk you through how to create a module using a very simple command line program that prints whatever the user provides it.</p>
<p>To follow this guide you will need the following: * a GitHub account (sign-up <a href="https://github.com/">here</a>) * a Docker-Hub account (sign-up <a href="https://hub.docker.com/">here</a>)</p>
<div id="module-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#module-structure" class="anchor"></a>Module structure</h2>
<p>At its heart, an <code>outsider</code> module is just an R package with a <code>Dockerfile</code>. All modules have the following basic file/folder structure:</p>
<pre><code>- DESCRIPTION
- R/
    - functions.R
- dockerfiles/
    - latest/
        - Dockerfile
- om.yaml
- README.md
- .travis.yml</code></pre>
<div id="r-files-and-folders" class="section level3">
<h3 class="hasAnchor">
<a href="#r-files-and-folders" class="anchor"></a>R files and folders</h3>
<p>The R package is encapsulated by the <code>DESCRIPTION</code> file and the <code>R/</code> folder. The first of these describes the package details (package name, author, dependencies, etc.) and the second contains the R code that make up the package. The <code>R/</code> folder can have any number of scripts with whatever names a developer wants (default <code>functions.R</code>).</p>
</div>
<div id="docker-files-and-folders" class="section level3">
<h3 class="hasAnchor">
<a href="#docker-files-and-folders" class="anchor"></a>Docker files and folders</h3>
<p>The <code>outsider</code> package and its modules depend on Docker to run. Docker acts like a virtual machine on a user’s computer. It allows users to run specific code, often designed for different operating systems, on any machine that has Docker installed. These code snippets are called Docker images. And these images are described by a <code>Dockerfile</code>. The <code>dockerfiles/</code> folder in the module contains the <code>Dockerfile</code> that describes how to install the external command-line program that the develop wishes to run through R. <code>dockerfiles/</code> can have multiple versions of a <code>Dockerfile</code> but every module must have a <code>latest/</code>.</p>
</div>
<div id="github-files-and-folders" class="section level3">
<h3 class="hasAnchor">
<a href="#github-files-and-folders" class="anchor"></a>GitHub files and folders</h3>
<p>To make modules discoverable on GitHub, all modules require an <code>om.yml</code>. This file has two elements (program and details) encoded in the <a href="https://en.wikipedia.org/wiki/YAML">YAML format</a>. To describe the module on the GitHub website a <code>README.md</code> is required.</p>
</div>
</div>
</div>
<div id="walkthrough" class="section level1">
<h1 class="hasAnchor">
<a href="#walkthrough" class="anchor"></a>Walkthrough</h1>
<p>We will walk you through how to create your very own <code>outsider</code> module that will simply run print whatever is given to it.</p>
<div id="generate-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#generate-the-package" class="anchor"></a>Generate the package</h2>
<p>To begin, we can use the <code>module_skeleton()</code> function. This will request a few details about the module and will then generate the above core files and folders.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(outsider)
<span class="kw"><a href="../reference/dot-module_skeleton.html">.module_skeleton</a></span>(<span class="dt">github_user =</span> <span class="st">'dombennett'</span>, <span class="dt">program_name =</span> <span class="st">'echo'</span>,
                 <span class="dt">docker_user =</span> <span class="st">'dombennett'</span>)</code></pre></div>
<p>The above code will create an <code>outsider</code> module with the name <code>om..echor</code>. Because by default the <code>Dockerfile</code> generates an image for Ubuntu and because we are creating a module based around the simple Unix command <code>echo</code> (as indicated with the “Program name: echo”) we can build the module and test it straight away.</p>
<div id="build-a-module" class="section level3">
<h3 class="hasAnchor">
<a href="#build-a-module" class="anchor"></a>Build a module</h3>
<p>The building of a module comes in two steps: build the Docker image and install the R package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(outsider)</code></pre></div>
</div>
</div>
<div id="dockerfiles" class="section level2">
<h2 class="hasAnchor">
<a href="#dockerfiles" class="anchor"></a>Dockerfiles</h2>
<p>In every <code>outsider</code> module there is a folder for all dockerfiles.</p>
<p>We need to build the docker image. <code>docker build -t [docker-hub-name]/[name]:[tag] dockerfiles/[tag]/.</code></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">docker</span> build -t dombennett/om_echo:latest om..echo/dockerfiles/latest/.</code></pre></div>
<pre><code>## Sending build context to Docker daemon  2.048kB


## Step 1/3 : FROM ubuntu:latest
##  ---&gt; 93fd78260bd1
## Step 2/3 : RUN mkdir /working_dir
##  ---&gt; Running in 31192edcfa75
## Removing intermediate container 31192edcfa75
##  ---&gt; ebe5d3a0402f
## Step 3/3 : WORKDIR /working_dir
##  ---&gt; Running in 6eb684a1a8ac
## Removing intermediate container 6eb684a1a8ac
##  ---&gt; eb0033603143
## Successfully built eb0033603143
## Successfully tagged dombennett/om_echo:latest</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/document">document</a></span>(<span class="st">'om..echo'</span>)</code></pre></div>
<pre><code>## Updating om..echo..dombennett documentation</code></pre>
<pre><code>## Loading om..echo..dombennett</code></pre>
<pre><code>## First time using roxygen2. Upgrading automatically...</code></pre>
<pre><code>## Updating roxygen version in /Users/djb208/Coding/outsider/vignettes/om..echo/DESCRIPTION</code></pre>
<pre><code>## Writing NAMESPACE
## Writing NAMESPACE
## Writing echo.Rd</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/install">install</a></span>(<span class="st">'om..echo'</span>)</code></pre></div>
<pre><code>## Installing om..echo..dombennett</code></pre>
<pre><code>## '/Library/Frameworks/R.framework/Resources/bin/R' --no-site-file  \
##   --no-environ --no-save --no-restore --quiet CMD INSTALL  \
##   '/Users/djb208/Coding/outsider/vignettes/om..echo'  \
##   --library='/Library/Frameworks/R.framework/Versions/3.5/Resources/library'  \
##   --install-tests</code></pre>
<pre><code>## </code></pre>
<pre><code>## Reloading installed om..echo..dombennett</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(outsider)
echo &lt;-<span class="st"> </span><span class="kw"><a href="../reference/module_import.html">module_import</a></span>(<span class="st">'echo'</span>, <span class="dt">repo =</span> <span class="st">'dombennett/om..echo'</span>)
<span class="kw">echo</span>(<span class="st">'hello world!'</span>)</code></pre></div>
<pre><code>## hello world!</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#introduction">Introduction</a><ul class="nav nav-pills nav-stacked">
<li><a href="#module-structure">Module structure</a></li>
      </ul>
</li>
      <li>
<a href="#walkthrough">Walkthrough</a><ul class="nav nav-pills nav-stacked">
<li><a href="#generate-the-package">Generate the package</a></li>
      <li><a href="#dockerfiles">Dockerfiles</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Dom Bennett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
